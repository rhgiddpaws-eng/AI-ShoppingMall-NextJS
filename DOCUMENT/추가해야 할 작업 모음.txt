1. [완료] 현재 장바구니 기능이 로컬에서 관리되고 있다.
   → DB에 Cart/CartItem, Wishlist/WishlistEntry 테이블 추가 및 서버 API(/api/user/cart, /api/user/wishlist)로 관리되게 수정 완료.
   - 로그인 사용자: 서버에서 조회·갱신. 비로그인: localStorage(persist) 유지.
   - ERD 참고 (구현됨):

┌───────────────┐       
│   Cart         │      
│───────────────│       
│ id (PK)       │       
│ userId (FK)   │       
│ createdAt     │      
│ updatedAt     │      
└───────────────┘       
             │         
             │          
┌───────────────┐
│  CartItem      │
│───────────────│
│ id (PK)       │
│ cartId (FK)   │
│ productId (FK)│
│ quantity      │
│ createdAt     │
│ updatedAt     │
└───────────────┘
-------------------------------적용 완료---------------------------------

2. 현재 결제가 토스페이먼츠로 되어 있는데 portone으로 교체.

3. **인프라 및 DevOps**
   - Vercel 또는 AWS(EC2, RDS 등) 배포 고려
   - GitHub Actions 등을 통한 CI/CD 자동화
   - 보안: HTTPS 적용, OAuth 인증 시 JWT 사용 고려

4. **기타**
   - 애널리틱스: Google Analytics, Amplitude 등 추후 연동 가능
   - 이메일/알림: SendGrid, Nodemailer 등 추후 연동 가능 -> AWS SES

5. 메인 쪽 기능 추가
    1. **리뷰/평점 시스템**  
    - 상품 후기, 평점 관리 등은 2차 버전 이후 도입
    2. **다양한 필터링 및 정렬 옵션**  
    - 사이즈, 색상, 가격대별 정렬 등은 MVP 이후 단계적으로 추가
    3. **쿠폰 및 할인 코드**  
    - 할인 정책, 프로모션은 MVP 출시 후 업데이트
    4. **고급 마이페이지 기능**  
    - 반품/교환 접수, 배송 추적, 적립금 관리 등은 추후 고려
    5. **멀티 언어 지원**  
    - 국제화(i18n) 지원은 해외 진출 시점에 추가

6. **확장 기능** (이후 버전에서 고려)  
  - **고급 분석**: 날짜/상품별 매출 추이, 전환율, 환불률, 방문 트래픽 분석 등  
  - **다양한 필터/정렬**: 여러 조건 조합으로 주문/유저/상품 등을 세밀하게 필터링  
  - **권한 관리**: 관리자/CS 직원 등 역할별로 접근 권한을 세분화  
  - **UI** 더 정밀한 무료 chat 도입, 전반적인 UI 개선 ( 애니메이션 및 조밀화 )

[도커 이슈 정리] 1) 로그인 없이 구매/장바구니: confirm API 비로그인 시 401 반환, success에 credentials:include, checkout 로그인 필수 적용됨. 2) 추천 상품 실패(도커): PG_HOST=ecommerce_db, PG_PORT=5432, OPENAI_API_KEY 설정. 3) 관리자 홈 버튼 적용됨. 4) JWT 전환 예정. 5) 배달: 네이버 지도+D2D+상태 추적 별도 설계.  

================================================================================
[도커 빌드/실행 시 심각한 문제 정리 및 로드맵] (DOCUMENT 참고용)
================================================================================

1. 로그인 없이 구매/장바구니 동작
   - 원인: 장바구니 API 401 시 클라이언트가 로컬(localStorage)로 fallback. 결제 승인 API가 비로그인 시 200으로 "로그인 필요"만 반환해 성공 페이지가 완료로 표시됨. 도커에서는 세션 쿠키가 전달 안 될 수 있음.
   - 적용된 수정: /api/tosspayments/confirm 은 비로그인 시 401 반환. /checkout/success 에서 credentials: 'include' 및 실패 시 에러 표시. /checkout 은 로그인 필수, 비로그인 시 /login?returnUrl=/checkout 리다이렉트.

2. 상세페이지 추천 상품 로드 실패 (도커에서만 발생 가능)
   - 원인: 추천 API는 OPENAI_API_KEY 와 pgClient(PG_HOST, PG_PORT) 사용. 도커에서 PG_HOST=localhost 이면 앱 컨테이너 자신을 가리켜 Postgres(ecommerce_db) 연결 실패. Prisma 는 DATABASE_URL 로 정상.
   - 해결: 도커 실행 시 .env.production 또는 env_file 에 PG_HOST=ecommerce_db, PG_PORT=5432, OPENAI_API_KEY 설정.

3. 관리자 페이지 "홈으로 돌아가기"
   - 적용 완료: 사이드바 상단에 "홈으로 돌아가기" 링크(/) 추가됨.

4. JWT 방식 전환
   - 현재 iron-session 쿠키. 전환 시 로그인에서 JWT 발급, API 는 Authorization 헤더로 검증, getSession() 사용처 교체. 쿠키 도메인 이슈 완화.

5. 배달 연동 (네이버 지도 + 배달 상태 추적)
   - 요구: 네이버 지도로 주문자 위치 <-> 판매처 위치 D2D 표시. 배달 상태(주문완료, 배송준비, 배달중, 도착중, 배달완료) 추적.
   - 구현 참고: 네이버 Maps API, Order.deliveryStatus 필드, 관리자에서 상태 변경. 실제 배달사(배민 등) 연동은 파트너/API 별도.

도커 배포 체크리스트: PG_HOST=ecommerce_db, PG_PORT=5432, OPENAI_API_KEY, SESSION_SECRET_1/2 설정. 결제/confirm 로그인 필수 확인.
